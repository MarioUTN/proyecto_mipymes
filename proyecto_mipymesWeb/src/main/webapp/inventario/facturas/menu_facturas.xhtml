<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<f:facet name="first">
		<meta name="viewport"
			content="width=device-width, initial-scale=1, shrink-to-fit=no, user-scalable=no" />
		<title>Invoices</title>
	</f:facet>
	<link href="../../css/style.css" rel="stylesheet"/>
	<style type="text/css">
.par {
	background-color: #b3b7cc !important;
	background-image: none !important;
	color: #091833 !important;
}

.inpar {
	background-color: #d0d2e0 !important;
	background-image: none !important;
	color: #091833 !important;
}

.state {
	background-color: #FB943C !important;
	background-image: none !important;
	color: #091833 !important;
}
</style>
</h:head>
<body id="body">
	<p:growl>
		<p:autoUpdate />
	</p:growl>
	<h:form id="form-menu">
		<p:menubar style="background-color: #5DADE2;">
			<p:menuitem value="Back" icon="fa fa-arrow-circle-left"
				outcome="/login?faces-redirect=true">
				<f:param name="i" value="0" />
			</p:menuitem>
			<p:menuitem value="Home"
				outcome="/seguridades/administrador/menu_administrador"
				icon="fa fa-home">
				<f:param name="i" value="1" />
			</p:menuitem>

			<p:submenu label="Sales" icon="fa fa-calendar-plus-o">
				<p:menuitem value="Normal Sales" icon="fa fa-shopping-cart"
					outcome="/inventario/ventas/index_ventas">
					<f:param name="i" value="2" />
				</p:menuitem>
				<p:menuitem value="Advanced Sales"
					icon="fa fa-cart-arrow-down"
					outcome="/inventario/ventas_anticipos/index_anticipos">
					<f:param name="i" value="3" />
				</p:menuitem>
			</p:submenu>

			<p:menuitem value="Buy Products" icon="fa fa-cart-plus"
				outcome="/inventario/compras/index_compras">
				<f:param name="i" value="4" />
			</p:menuitem>

			<p:menuitem value="Customers" icon="fa fa-users"
				outcome="/talentohumano/clientes/menu_clientes">
				<f:param name="i" value="5" />
			</p:menuitem>

			<p:menuitem value="Sellers" icon="fa fa-group"
				disabled="#{beanUsuarios.usuario.tipoUsuario.idTipoUsuario!=1}"
				outcome="/talentohumano/vendedores/menu_vendedores">
				<f:param name="i" value="6" />
			</p:menuitem>

			<p:menuitem value="Invoices" icon="fa fa-file-text"
				disabled="#{beanUsuarios.usuario.tipoUsuario.idTipoUsuario!=1}"
				outcome="/inventario/facturas/menu_facturas">
				<f:param name="i" value="7" />
			</p:menuitem>

			<p:menuitem value="Products" icon="fa fa-cubes"
				disabled="#{beanUsuarios.usuario.tipoUsuario.idTipoUsuario!=1}"
				outcome="/inventario/productos/menu_productos">
				<f:param name="i" value="8" />
			</p:menuitem>

			<p:menuitem value="Suppliers" icon="fa fa-address-card"
				disabled="#{beanUsuarios.usuario.tipoUsuario.idTipoUsuario!=1}"
				outcome="/inventario/compras/Proveedor">
				<f:param name="i" value="9" />
			</p:menuitem>

			<f:facet name="options">
				<p:menuButton value="#{beanUsuarios.usuario.idUsuario}"
					icon="fa fa-user">
					<p:menuitem value="Profile" icon="fa fa-cog"></p:menuitem>
					<p:menuitem value="Sign Out" icon="fa fa-sign-out"
						outcome="/login"></p:menuitem>
				</p:menuButton>
			</f:facet>
		</p:menubar>
	</h:form>

	<div align="center">

		<p:panel>
			<h:form id="form-opciones">
				<div align="center">
					<p:panel header="Show invoice by:">
						<p:panelGrid columns="6" styleClass="ui-noborder">
							<p:commandButton value="Invoice Type" icon="fa fa-file-text"
								update=":form-ver-tipo:tipo-FacturaDialog"
								oncomplete="PF('tipoFacturaDialog').show()"
								styleClass="ui-button-success">
								<p:resetInput target=":form-ver-tipo:tipo-FacturaDialog" />
							</p:commandButton>
							<p:commandButton value="Way to Pay" icon="fa fa-money"
								update=":form-ver-forma-pago:formapago-FacturaDialog"
								oncomplete="PF('formapagoFacturaDialog').show()"
								styleClass="ui-button-success">
								<p:resetInput
									target=":form-ver-forma-pago:formapago-FacturaDialog" />
							</p:commandButton>

							<p:commandButton value="Invoice by Client"
								icon="fa fa-street-view"
								update=":form-ver-cliente:cliente-FacturaDialog"
								oncomplete="PF('clienteFacturaDialog').show()"
								styleClass="ui-button-success">
								<p:resetInput target=":form-ver-cliente:cliente-FacturaDialog" />
							</p:commandButton>

							<p:commandButton value="Invoice by Salesman" icon="fa fa-user"
								update=":form-ver-vendedor:vendedor-FacturaDialog"
								oncomplete="PF('vendedorFacturaDialog').show()"
								styleClass="ui-button-success">
								<p:resetInput target=":form-ver-vendedor:vendedor-FacturaDialog" />
							</p:commandButton>

							<p:commandButton value="Invoice by Date" icon="fa fa-calendar"
								update=":form-ver-date:date-FacturaDialog" actionListener="#{beanFacturas.actionListenerDate()}"
								oncomplete="PF('dateFacturaDialog').show()"
								styleClass="ui-button-success">
								<p:resetInput target=":form-ver-date:date-FacturaDialog" />
							</p:commandButton>

							<p:commandButton value="View all Invoices" icon="fa fa-list"
								update="form-facturas"
								actionListener="#{beanFacturas.actionListenerVerFacturas()}"
								styleClass="ui-button-success">
							</p:commandButton>

						</p:panelGrid>
					</p:panel>
				</div>
			</h:form>


			<h:form id="form-ver-tipo">
				<div align="center">
					<p:dialog header="Select the Invoice Type" showEffect="fade"
						modal="true" widgetVar="tipoFacturaDialog" responsive="true">
						<p:outputPanel id="tipo-FacturaDialog" class="ui-fluid">
							<div align="center">
								<img src="../../Imagenes/receipt_bill_invoice_price_payment.ico"
									alt="" />
							</div>
							<p:panelGrid columns="2" styleClass="ui-noborder">
								<h:outputText value="Invoice Type:" style="font-weight:bold" />
								<p:selectOneMenu value="#{beanFacturas.id_tipo_factura}"
									style="width:350px" panelStyle="width:180px" effect="fade"
									filter="true" filterMatchMode="startsWith">
									<f:selectItems value="#{beanFacturas.listaTipoFacturas}"
										var="tipofactura" itemLabel="#{tipofactura.tfNombre}"
										itemValue="#{tipofactura.idTipoFactura}">
										<p:column style="width:10%" headerText="NOMBRE">
											<span class="flag flag-#{tipofactura.tfNombre}"
												style="width: 30px; height: 20px" />
										</p:column>
										<p:column style="width:10%" headerText="ID">
											<span class="flag flag-#{tipofactura.idTipoFactura}"
												style="width: 30px; height: 20px" />
										</p:column>
										<p:column>
											<f:facet name="header">
												<h:outputText value="Name" />
											</f:facet>
											<h:outputText value="#{tipofactura.tfNombre}" />
										</p:column>

									</f:selectItems>
									<f:facet name="footer">
										<h:outputText
											value="#{beanFacturas.listaTipoFacturas.size()} invoices types founds "
											style="font-weight:bold;" styleClass="p-py-1 p-d-block" />
									</f:facet>
								</p:selectOneMenu>
							</p:panelGrid>
							<br />
							<div align="center">
								<p:panelGrid columns="2" styleClass="ui-noborder">
									<p:commandButton value="Show"
										styleClass="rounded-button ui-button-success"
										style="width: auto"
										actionListener="#{beanFacturas.actionListenerVerFacturasByTipoFactura()}"
										oncomplete="PF('tipoFacturaDialog').hide()" icon="fa fa-table"
										update="form-facturas" />
									<p:commandButton value="Cancel"
										styleClass="rounded-button ui-button-danger"
										style="width: auto"
										actionListener="#{beanFacturas.actionListenerCancel()}"
										oncomplete="PF('tipoFacturaDialog').hide()" icon="fa fa-close"
										update="form-facturas" />
								</p:panelGrid>
							</div>
						</p:outputPanel>

					</p:dialog>
				</div>
			</h:form>





			<h:form id="form-ver-forma-pago">
				<div align="center">
					<p:dialog header="Select the payment method"
						showEffect="fade" modal="true" widgetVar="formapagoFacturaDialog"
						responsive="true">
						<p:outputPanel id="formapago-FacturaDialog" class="ui-fluid">
							<div align="center">
								<img src="../../Imagenes/pay_per_click_16331.ico" alt="" />
							</div>
							<p:panelGrid columns="2" styleClass="ui-noborder">
								<h:outputText value="Payment Method:" style="font-weight:bold" />
								<p:selectOneMenu value="#{beanFacturas.id_forma_pago}"
									style="width:350px" panelStyle="width:180px" effect="fade"
									filter="true" filterMatchMode="startsWith">
									<f:selectItems value="#{beanFacturas.listaFormaPagos}" var="fp"
										itemLabel="#{fp.fpNombre}" itemValue="#{fp.idFormaPago}">
										<p:column style="width:10%" headerText="NOMBRE">
											<span class="flag flag-#{fp.fpNombre}"
												style="width: 30px; height: 20px" />
										</p:column>
										<p:column style="width:10%" headerText="ID">
											<span class="flag flag-#{fp.idFormaPago}"
												style="width: 30px; height: 20px" />
										</p:column>
										<p:column>
											<f:facet name="header">
												<h:outputText value="Name" />
											</f:facet>
											<h:outputText value="#{fp.fpNombre}" />
										</p:column>

									</f:selectItems>
									<f:facet name="footer">
										<h:outputText
											value="#{beanFacturas.listaFormaPagos.size()} payment methods found"
											style="font-weight:bold;" styleClass="p-py-1 p-d-block" />
									</f:facet>
								</p:selectOneMenu>
							</p:panelGrid>
							<br />
							<div align="center">
								<p:panelGrid columns="2" styleClass="ui-noborder">
									<p:commandButton value="Show"
										styleClass="rounded-button ui-button-success"
										style="width: auto"
										actionListener="#{beanFacturas.actionListenerVerFacturasByFormaPago()}"
										oncomplete="PF('formapagoFacturaDialog').hide()"
										icon="fa fa-table" update="form-facturas" />
									<p:commandButton value="Cancel"
										styleClass="rounded-button ui-button-danger"
										style="width: auto"
										actionListener="#{beanFacturas.actionListenerCancel()}"
										oncomplete="PF('formapagoFacturaDialog').hide()"
										icon="fa fa-close" update="form-facturas" />
								</p:panelGrid>
							</div>
						</p:outputPanel>

					</p:dialog>
				</div>
			</h:form>

			<h:form id="form-ver-cliente">
				<div align="center">
					<p:dialog header="Select Customer" showEffect="fade"
						modal="true" widgetVar="clienteFacturaDialog" responsive="true">
						<p:outputPanel id="cliente-FacturaDialog" class="ui-fluid">
							<div align="center">
								<img src="../../Imagenes/communitysupport_users_people_6236.ico"
									alt="" />
							</div>
							<p:panelGrid columns="2" styleClass="ui-noborder">
								<h:outputText value="Customer:" style="font-weight:bold" />
								<p:selectOneMenu value="#{beanFacturas.cedula_ruc}"
									style="width:350px" panelStyle="width:180px" effect="fade"
									filter="true" filterMatchMode="startsWith">
									<f:selectItems value="#{beanClientes.listaClientes}"
										var="cliente" itemLabel="#{cliente.usuario.usNombres} #{cliente.usuario.usApellidos}"
										itemValue="#{cliente.cliRucCedula}">
										<p:column style="width:10%" headerText="NAME">
											<span class="flag flag-#{cliente.usuario.usNombres}"
												style="width: 30px; height: 20px" />
										</p:column>
										<p:column style="width:10%" headerText="ID">
											<span class="flag flag-#{cliente.cliRucCedula}"
												style="width: 30px; height: 20px" />
										</p:column>
										<p:column>
											<f:facet name="header">
												<h:outputText value="Name" />
											</f:facet>
											<h:outputText value="#{cliente.usuario.usNombres}" />
										</p:column>

									</f:selectItems>
									<f:facet name="footer">
										<h:outputText
											value="#{beanClientes.listaClientes.size()} customers found"
											style="font-weight:bold;" styleClass="p-py-1 p-d-block" />
									</f:facet>
								</p:selectOneMenu>
							</p:panelGrid>
							<br />
							<div align="center">
								<p:panelGrid columns="2" styleClass="ui-noborder">
									<p:commandButton value="Show"
										styleClass="rounded-button ui-button-success"
										style="width: auto"
										actionListener="#{beanFacturas.actionListenerVerFacturasByCliente()}"
										oncomplete="PF('clienteFacturaDialog').hide()"
										icon="fa fa-table" update="form-facturas" />
									<p:commandButton value="Cancel"
										styleClass="rounded-button ui-button-danger"
										style="width: auto"
										actionListener="#{beanFacturas.actionListenerCancel()}"
										oncomplete="PF('clienteFacturaDialog').hide()"
										icon="fa fa-close" update="form-facturas" />
								</p:panelGrid>
							</div>
						</p:outputPanel>

					</p:dialog>
				</div>
			</h:form>

			<h:form id="form-ver-vendedor">
				<div align="center">
					<p:dialog header="Select Salesman" showEffect="fade" modal="true"
						widgetVar="vendedorFacturaDialog" responsive="true">
						<div align="center">
							<img src="../../Imagenes/kdmconfigdanger_users_alerts_5921.ico"
								alt="" />
						</div>
						<p:outputPanel id="vendedor-FacturaDialog" class="ui-fluid">

							<p:panelGrid columns="2" styleClass="ui-noborder">
								<h:outputText value="Salesman:" style="font-weight:bold" />
								<p:selectOneMenu value="#{beanFacturas.id_vendedor}"
									style="width:350px" panelStyle="width:180px" effect="fade"
									filter="true" filterMatchMode="startsWith">
									<f:selectItems value="#{beanFacturas.listVendedors}"
										var="vendedor" itemLabel="#{vendedor.usuario.usNombres} #{vendedor.usuario.usApellidos}"
										itemValue="#{vendedor.idVendedor}">
										<p:column style="width:10%" headerText="NOMBRE">
											<span class="flag flag-#{vendedor.usuario.usNombres}"
												style="width: 30px; height: 20px" />
										</p:column>
										<p:column style="width:10%" headerText="ID">
											<span class="flag flag-#{vendedor.idVendedor}"
												style="width: 30px; height: 20px" />
										</p:column>
										<p:column>
											<f:facet name="header">
												<h:outputText value="Name" />
											</f:facet>
											<h:outputText value="#{vendedor.usuario.usNombres}" />
										</p:column>

									</f:selectItems>
									<f:facet name="footer">
										<h:outputText
											value="#{beanFacturas.listVendedors.size()} sellers found"
											style="font-weight:bold;" styleClass="p-py-1 p-d-block" />
									</f:facet>
								</p:selectOneMenu>
							</p:panelGrid>
							<br />
							<div align="center">
								<p:panelGrid columns="2" styleClass="ui-noborder">
									<p:commandButton value="Show"
										styleClass="rounded-button ui-button-success"
										style="width: auto"
										actionListener="#{beanFacturas.actionListenerVerFacturasByVendedors()}"
										oncomplete="PF('vendedorFacturaDialog').hide()"
										icon="fa fa-table" update="form-facturas" />
									<p:commandButton value="Cancel"
										styleClass="rounded-button ui-button-danger"
										style="width: auto"
										actionListener="#{beanFacturas.actionListenerCancel()}"
										oncomplete="PF('vendedorFacturaDialog').hide()"
										icon="fa fa-close" update="form-facturas" />
								</p:panelGrid>
							</div>
						</p:outputPanel>

					</p:dialog>
				</div>
			</h:form>


			<h:form id="form-ver-date">
				<p:growl id="msgs" showDetail="true"
					skipDetailIfEqualsSummary="true" />
				<div align="center">
					<p:dialog header="Select Date" showEffect="fade" modal="true"
						widgetVar="dateFacturaDialog" responsive="true">
						<div align="center">
							<img src="../../Imagenes/calendar-clock-icon_34472.ico" alt="" />
						</div>
						<p:outputPanel id="date-FacturaDialog" class="ui-fluid">

							<p:panelGrid columns="2" styleClass="ui-noborder">
								<h:outputText value="Date:" style="font-weight:bold" />
								<p:datePicker value="#{beanFacturas.date}" showDate="true"
									pattern="dd-MM-yyyy" />

							</p:panelGrid>
							<br />
							<div align="center">
								<p:panelGrid columns="2" styleClass="ui-noborder">
									<p:commandButton value="Show"
										styleClass="rounded-button ui-button-success"
										style="width: auto"
										actionListener="#{beanFacturas.actionListenerVerFacturasByDate()}"
										oncomplete="PF('dateFacturaDialog').hide()" icon="fa fa-table"
										update="form-facturas" />
									<p:commandButton value="Cancel"
										styleClass="rounded-button ui-button-danger"
										style="width: auto"
										actionListener="#{beanFacturas.actionListenerCancel()}"
										oncomplete="PF('dateFacturaDialog').hide()" icon="fa fa-close"
										update="form-facturas" />
								</p:panelGrid>
							</div>
						</p:outputPanel>

					</p:dialog>
				</div>
			</h:form>



			<h:form id="form-facturas">
				<p:panel header="">
					<div align="center">
						<p:dataTable value="#{beanFacturas.listaFacturas}"
							stripedRows="true" var="factura" paginator="true" reflow="true"
							rows="6" style="font-size: 12px" paginatorPosition="bottom"
							rowIndexVar="index"
							rowStyleClass="#{!factura.factEstado ? 'state':null}">
							<p:column headerText="NUMBER" style="width:80px"
								filterBy="#{factura.idFactura}">
								<h:outputText value="#{factura.factNumeroFactura}" />
							</p:column>
							<p:column headerText="DATE ISSUE" style="width:70px">
								<h:outputText value="#{factura.factFechaEmision}" />
							</p:column>

							<p:column headerText="PAY METHOD">
								<h:outputText value="#{factura.formaPago.fpNombre}" />
							</p:column>
							<p:column headerText="INVOICE TYPE">
								<h:outputText value="#{factura.tipoFactura.tfNombre}" />
							</p:column>

							<p:column headerText="CUSTOMER">
								<h:outputText
									value="#{factura.cabeceraFactura.cliente.usuario.usNombres} #{factura.cabeceraFactura.cliente.usuario.usApellidos}" />
							</p:column>

							<p:column headerText="DELIVER" style="width:50px">
								<p:commandButton
									icon="#{beanFacturas.iconoDeliver(factura.factEntregado)}"
									actionListener="#{beanFacturas.actionListenerDeliverProduct(factura.idFactura)}"
									update=":form-facturas"
									disabled="#{factura.tipoFactura.idTipoFactura!=4}"
									styleClass="#{beanFacturas.styleDeliver(factura.factEntregado)}">
								</p:commandButton>
							</p:column>

							<p:column headerText="SUB TOTAL" style="width:60px">
								<h:outputText value="#{factura.factSubtotal}" />
							</p:column>

							<p:column headerText="IVA 12%" style="width:60px">
								<h:outputText value="#{factura.factIva}" />
							</p:column>

							<p:column headerText="TOTAL" style="width:50px">
								<h:outputText value="#{factura.factTotal}" />
							</p:column>

							<p:column headerText="OPTIONS">
								<p:commandButton icon="fa fa-list-alt"
									actionListener="#{beanFacturas.actionListenerSeleccionarFactura(factura.idFactura)}"
									onclick="PF('detalleFactura').show()"
									update=":form-detalle:detalle-Factura"
									oncomplete="PF('detalleFactura').show()"
									styleClass="rounded-button ui-button-help">
									<p:resetInput target=":form-detalle:detalle-Factura" />
								</p:commandButton>
								<p:commandButton icon="fa fa-dollar"
									actionListener="#{beanFacturas.actionListenerSeleccionarDetalleAbono(factura.idFactura)}"
									onclick="PF('abonarFactura').show()"
									update=":form-abonar:abonar-Factura"
									oncomplete="PF('abonarFactura').show()"
									styleClass="rounded-button ui-button-success"
									disabled="#{factura.tipoFactura.idTipoFactura!=4}">
									<p:resetInput target=":form-abonar:abonar-Factura" />
								</p:commandButton>

								<p:commandButton value="F" ajax="false"
									styleClass="rounded-button ui-button-info"
									icon="fa fa-file-pdf-o"
									action="#{beanFacturas.actionListenerGenerarFacturaPdf(factura.idFactura)}">
								</p:commandButton>

								<p:commandButton value="A" ajax="false"
									styleClass="rounded-button ui-button-warning"
									icon="fa fa-file-pdf-o"
									disabled="#{factura.tipoFactura.idTipoFactura!=4}"
									action="#{beanFacturas.actionListenerGenerarAbonosPdf(factura.idFactura)}">
								</p:commandButton>
							</p:column>
						</p:dataTable>
					</div>
				</p:panel>
			</h:form>


		</p:panel>

		<h:form id="form-detalle">
			<div align="center">
				<p:dialog header="Detail view of the select invoice"
					showEffect="fade" modal="true" widgetVar="detalleFactura"
					responsive="true">
					<p:outputPanel id="detalle-Factura" class="ui-fluid">

						<p:panel header="">
							<f:facet name="actions" style="background-color: #5DADE2;">
								<p:menuButton value="Generate Report and Print"
									icon="fa fa-file-pdf-o">

									<p:menuitem value="Print Report of Invoice" ajax="false"
										styleClass="ui-button-help" update="form-detalle"
										icon="fa fa-file-pdf-o"
										action="#{beanFacturas.actionListenerGenerarReporteFactura()}">
									</p:menuitem>
									<p:menuitem value="Print Report of Abonos" ajax="false"
										styleClass="ui-button-help" update="form-detalle"
										icon="fa fa-file-pdf-o"
										disabled="#{beanFacturas.facturaSeleccionada.tipoFactura.idTipoFactura!=4}"
										action="#{beanFacturas.actionListenerGenerarReporteAbonos()}">
									</p:menuitem>

								</p:menuButton>

							</f:facet>

							<p:splitter layout="vertical">
								<p:splitterPanel styleClass="p-d-flex p-ai-center p-jc-center">
									<p:panelGrid columns="6" styleClass="ui-noborder">
										<h:outputLabel value="Date Issue:" style="font-weight:bold" />
										<h:outputLabel
											value="#{beanFacturas.facturaSeleccionada.factFechaEmision}" />
										<h:outputLabel value="Salesman: " style="font-weight:bold" />
										<h:outputLabel
											value="#{beanFacturas.facturaSeleccionada.cabeceraFactura.vendedor.usuario.usNombres} #{beanFacturas.facturaSeleccionada.cabeceraFactura.vendedor.usuario.usApellidos}" />
										<h:outputLabel value="Invoice Number: " style="font-weight:bold" />
										<h:outputLabel
											value="#{beanFacturas.facturaSeleccionada.factNumeroFactura}"
											style="font-weight:bold; color: red" />
									</p:panelGrid>
								</p:splitterPanel>
							</p:splitter>
							<div align="center">
								<p:splitter>
									<p:splitterPanel>
										<p:splitter layout="vertical">
											<p:splitterPanel>
												<p:splitter>
													<p:splitterPanel
														styleClass="p-d-flex p-ai-center p-jc-center" size="100">
														<p:panelGrid columns="6" styleClass="ui-noborder">
															<p:outputLabel value="Cedula o RUC: "
																style="font-weight:bold"></p:outputLabel>
															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.cabeceraFactura.cliente.cliRucCedula}" />

															<p:outputLabel value="First Name: " style="font-weight:bold"></p:outputLabel>
															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.cabeceraFactura.cliente.usuario.usNombres}" />
															<p:outputLabel value="Last Name: "
																style="font-weight:bold"></p:outputLabel>
															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.cabeceraFactura.cliente.usuario.usApellidos}" />
															<p:outputLabel value="Address; "
																style="font-weight:bold"></p:outputLabel>
															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.cabeceraFactura.cliente.cliDireccion}" />
															<p:outputLabel value="Phone: "
																style="font-weight:bold"></p:outputLabel>
															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.cabeceraFactura.cliente.cliTelefono}" />
															<p:outputLabel value="Mail: " style="font-weight:bold"></p:outputLabel>

															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.cabeceraFactura.cliente.cliEmail}" />
														</p:panelGrid>
													</p:splitterPanel>
													<p:splitterPanel size="30"
														styleClass="p-d-flex p-ai-center p-jc-center">
														<p:panelGrid columns="2" styleClass="ui-noborder">
															<p:outputLabel value="Invoice pay: "
																style="font-weight:bold"></p:outputLabel>
															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.factEstado}" />

															<p:outputLabel value="Products Delivered: "
																style="font-weight:bold"></p:outputLabel>
															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.factEntregado}" />

														</p:panelGrid>
													</p:splitterPanel>
												</p:splitter>

											</p:splitterPanel>

										</p:splitter>
									</p:splitterPanel>
								</p:splitter>

							</div>
						</p:panel>

						<p:panel header="">
							<div align="center">
								<p:splitter>
									<p:splitterPanel styleClass="p-d-flex p-ai-center p-jc-center"
										size="100">
										<div align="center">
											<p:dataTable
												value="#{beanFacturas.facturaSeleccionada.detalleFacturas}"
												stripedRows="true" var="detalle" paginator="true" rowStyleClass="#{index mod 2 eq 0 ? 'par' : 'inpar'}"
												reflow="true" rows="6" style="font-size: 12px"
												paginatorPosition="bottom" rowIndexVar="index">
												<p:column headerText="CODE" style="width:80px">
													<h:outputText value="#{detalle.producto.prodCodigo}" />
												</p:column>
												<p:column headerText="QUAL" style="width:40px">
													<h:outputText value="#{detalle.detCantidad}" />
												</p:column>

												<p:column headerText="NAME">
													<h:outputText value="#{detalle.producto.prodNombre}"
														style="font-size: 10px" />
												</p:column>
												<p:column headerText="DESCR">
													<h:outputText value="#{detalle.producto.prodDescripcion}"
														style="font-size: 10px" />
												</p:column>

												<p:column headerText="UNIT PRICE">
													<h:outputText value="#{detalle.producto.prodPvpublico}" />
												</p:column>

												<p:column headerText="IVA 12%" style="width:60px">
													<h:outputText value="#{detalle.detIva}" />
												</p:column>

												<p:column headerText="SUB TOTAL">
													<h:outputText value="#{detalle.detSubtotal}" />
												</p:column>
												<p:column headerText="TOTAL">
													<h:outputText value="#{detalle.detPrecioTotal}" />
												</p:column>


											</p:dataTable>
										</div>
									</p:splitterPanel>
									<p:splitterPanel styleClass="p-d-flex p-ai-center p-jc-center"
										size="30">
										<p:panel header="Total Value of the Invoice">
											<p:panelGrid columns="2" styleClass="ui-noborder">
												<p:outputLabel value="Sub Total: " style="font-weight:bold"></p:outputLabel>
												<p:outputLabel
													value="#{beanFacturas.facturaSeleccionada.factSubtotal}"
													style="font-weight:bold"></p:outputLabel>
												<p:outputLabel value="IVA 12 %: " style="font-weight:bold"></p:outputLabel>
												<p:outputLabel
													value="#{beanFacturas.facturaSeleccionada.factIva}"
													style="font-weight:bold"></p:outputLabel>
												<p:outputLabel value="IVA 00 %: " style="font-weight:bold"></p:outputLabel>
												<p:outputLabel value="0.00" style="font-weight:bold"></p:outputLabel>
												<p:outputLabel value="TOTAL: "
													style="font-weight:bold; font-size:22px; color: blue"></p:outputLabel>
												<p:outputLabel
													value="#{beanFacturas.facturaSeleccionada.factTotal}"
													style="font-weight:bold; font-size:22px; color: blue"></p:outputLabel>
											</p:panelGrid>

										</p:panel>
										<p:panel header="">
											<div align="center">
												<p:panelGrid columns="2" styleClass="ui-noborder">
													<p:outputLabel value="Balance: "
														style="font-weight:bold; font-size:22px; color: #EB3E1B"></p:outputLabel>
													<p:outputLabel value="$ #{beanFacturas.saldo_actual}"
														style="font-weight:bold; font-size:22px; color: #EB3E1B"></p:outputLabel>
												</p:panelGrid>
											</div>
										</p:panel>

									</p:splitterPanel>
								</p:splitter>

							</div>
						</p:panel>

						<p:panelGrid columns="1" styleClass="ui-noborder">


							<p:commandButton value="Close"
								styleClass="rounded-button ui-button-danger" style="width: auto"
								oncomplete="PF('detalleFactura').hide()" icon="fa fa-close"
								update="form-facturas" />
						</p:panelGrid>
					</p:outputPanel>

				</p:dialog>
			</div>
		</h:form>

		<h:form id="form-abonar">
			<div align="center">
				<p:dialog header="Pay Invoice" showEffect="fade" modal="true"
					widgetVar="abonarFactura" responsive="true">
					<p:outputPanel id="abonar-Factura" class="ui-fluid">

						<p:panel header="">
							<p:splitter layout="vertical">
								<p:splitterPanel styleClass="p-d-flex p-ai-center p-jc-center">
									<p:panelGrid columns="6" styleClass="ui-noborder">
										<h:outputLabel value="Date Issue:" style="font-weight:bold" />
										<h:outputLabel
											value="#{beanFacturas.facturaSeleccionada.factFechaEmision}" />
										<h:outputLabel value="Salesman: " style="font-weight:bold" />
										<h:outputLabel
											value="#{beanFacturas.facturaSeleccionada.cabeceraFactura.vendedor.usuario.usNombres} #{beanFacturas.facturaSeleccionada.cabeceraFactura.vendedor.usuario.usApellidos}" />
										<h:outputLabel value="Invoice Num: " style="font-weight:bold" />
										<h:outputLabel
											value="#{beanFacturas.facturaSeleccionada.factNumeroFactura}"
											style="font-weight:bold; color: red" />
									</p:panelGrid>
								</p:splitterPanel>
							</p:splitter>
							<div align="center">
								<p:splitter>
									<p:splitterPanel>
										<p:splitter layout="vertical">
											<p:splitterPanel>
												<p:splitter>
													<p:splitterPanel
														styleClass="p-d-flex p-ai-center p-jc-center" size="100">
														<p:panelGrid columns="6" styleClass="ui-noborder">
															<p:outputLabel value="Card o RUC: "
																style="font-weight:bold"></p:outputLabel>
															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.cabeceraFactura.cliente.cliRucCedula}" />

															<p:outputLabel value="First Names: " style="font-weight:bold"></p:outputLabel>
															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.cabeceraFactura.cliente.usuario.usNombres}" />
															<p:outputLabel value="Last Names: "
																style="font-weight:bold"></p:outputLabel>
															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.cabeceraFactura.cliente.usuario.usApellidos}" />
															<p:outputLabel value="Address: "
																style="font-weight:bold"></p:outputLabel>
															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.cabeceraFactura.cliente.cliDireccion}" />
															<p:outputLabel value="Phone: "
																style="font-weight:bold"></p:outputLabel>
															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.cabeceraFactura.cliente.cliTelefono}" />
															<p:outputLabel value="Mail: " style="font-weight:bold"></p:outputLabel>

															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.cabeceraFactura.cliente.cliEmail}" />
														</p:panelGrid>
													</p:splitterPanel>
													<p:splitterPanel size="30"
														styleClass="p-d-flex p-ai-center p-jc-center">
														<p:panelGrid columns="4" styleClass="ui-noborder"
															id="price">

															<p:outputLabel value="Value: " style="font-weight:bold" />
															<p:spinner id="e" placeholder="15.25" stepFactor="0.01"
																style="width:125px" min="0.00"
																disabled="#{beanFacturas.facturaSeleccionada.factEstado}"
																value="#{beanFacturas.valor_abono}" required="true"
																requiredMessage="Enter the Pay value!">
																<p:tooltip for="e" value="Enter the pay value!"
																	position="bottom" />
															</p:spinner>



														</p:panelGrid>

														<div align="center">

															<p:panelGrid columns="1" styleClass="ui-noborder"
																id="price-1">
																<p:commandButton value="Pay Invoice"
																	icon="fa fa-save"
																	disabled="#{beanFacturas.saldo_actual==0}"
																	styleClass="rounded-button ui-button-success"
																	oncomplete="PF('abonarFactura').show()"
																	update="tabla-abono,saldo,price-1,price"
																	actionListener="#{beanFacturas.actionListenerAgregarAbonoFactura(beanUsuarios.vendedor.idVendedor)}" />
															</p:panelGrid>

														</div>
													</p:splitterPanel>
													<p:splitterPanel size="30"
														styleClass="p-d-flex p-ai-center p-jc-center">
														<p:panelGrid columns="2" styleClass="ui-noborder">
															<p:outputLabel value="Canceled Invoice: "
																style="font-weight:bold"></p:outputLabel>
															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.factEstado}" />

															<p:outputLabel value="Delivered Products: "
																style="font-weight:bold"></p:outputLabel>
															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.factEntregado}" />

														</p:panelGrid>
													</p:splitterPanel>
												</p:splitter>

											</p:splitterPanel>

										</p:splitter>
									</p:splitterPanel>
								</p:splitter>

							</div>
						</p:panel>

						<p:panel header="Detail of payments made">
							<div align="center">
								<p:splitter>
									<p:splitterPanel styleClass="p-d-flex p-ai-center p-jc-center"
										size="100">
										<div align="center">
											<p:dataTable value="#{beanFacturas.listaDetalleAbonos}"
												id="tabla-abono" stripedRows="true" var="detalleabono"
												paginator="true" reflow="true" rows="6"
												style="font-size: 12px" paginatorPosition="bottom"
												rowIndexVar="index" rowStyleClass="#{index mod 2 eq 0 ? 'par' : 'inpar'}">
												<p:column headerText="CUSTOMER" style="width:200px">
													<h:outputText
														value="#{detalleabono.cliente.usuario.usNombres} #{detalleabono.cliente.usuario.usApellidos}" />
												</p:column>
												<p:column headerText="SALESMAN" style="width:200px">
													<h:outputText
														value="#{detalleabono.vendedor.usuario.usNombres} #{detalleabono.vendedor.usuario.usApellidos}" />
												</p:column>

												<p:column headerText="PAY VALUE" style="width:80px">
													<h:outputText value="#{detalleabono.detabAbono}">
														<f:convertNumber minFractionDigits="2" />
													</h:outputText>
												</p:column>
												<p:column headerText="DATE PAY" style="width:80px">
													<h:outputText value="#{detalleabono.detabFechaAbono}">
														<f:convertDateTime pattern="dd-MM-yyyy" />
													</h:outputText>
												</p:column>

												<p:column headerText="PRE. BAL" style="width:80px">
													<h:outputText value="#{detalleabono.detabSaldoAnterior}" />
												</p:column>

												<p:column headerText="CUR. BAL" style="width:80px">
													<h:outputText value="#{detalleabono.detabSaldoActual}" />
												</p:column>

												<p:column headerText="TOTAL INV" style="width:100px">
													<h:outputText
														value="#{detalleabono.estadoPedido.estValorTotal}" />
												</p:column>
											</p:dataTable>
										</div>
									</p:splitterPanel>
									<p:splitterPanel styleClass="p-d-flex p-ai-center p-jc-center"
										size="30">
										<p:panel header="Total value of the invoice">
											<p:panelGrid columns="2" styleClass="ui-noborder">
												<p:outputLabel value="Sub Total: " style="font-weight:bold"></p:outputLabel>
												<p:outputLabel
													value="#{beanFacturas.facturaSeleccionada.factSubtotal}"
													style="font-weight:bold"></p:outputLabel>
												<p:outputLabel value="IVA 12 %: " style="font-weight:bold"></p:outputLabel>
												<p:outputLabel
													value="#{beanFacturas.facturaSeleccionada.factIva}"
													style="font-weight:bold"></p:outputLabel>
												<p:outputLabel value="IVA 00 %: " style="font-weight:bold"></p:outputLabel>
												<p:outputLabel value="0.00" style="font-weight:bold"></p:outputLabel>
												<p:outputLabel value="TOTAL: "
													style="font-weight:bold; font-size:18px; color: blue"></p:outputLabel>
												<p:outputLabel
													value="#{beanFacturas.facturaSeleccionada.factTotal}"
													style="font-weight:bold; font-size:18px; color: blue"></p:outputLabel>
											</p:panelGrid>

										</p:panel>
										<p:panel header="">
											<div align="center">
												<p:panelGrid id="saldo" columns="2" styleClass="ui-noborder">
													<p:outputLabel value="BALANCE: "
														style="font-weight:bold; font-size:18px; color: #EB3E1B"></p:outputLabel>
													<p:outputLabel value="$ #{beanFacturas.saldo_actual}"
														style="font-weight:bold; font-size:18px; color: #EB3E1B"></p:outputLabel>
												</p:panelGrid>
											</div>
										</p:panel>

									</p:splitterPanel>
								</p:splitter>

							</div>
						</p:panel>

						<p:panelGrid columns="2" styleClass="ui-noborder">
							<p:commandButton value="Pay Invoice"
								disabled="#{beanFacturas.facturaSeleccionada.factEstado}"
								styleClass="rounded-button ui-button-help" style="width: auto"
								oncomplete="PF('abonarFactura').hide()" icon="fa fa-money"
								actionListener="#{beanFacturas.actionListenerGuardarAbonosFacturas()}"
								update="form-facturas,:form-detalle,:form-abonar" />

							<p:commandButton value="Cancel"
								styleClass="rounded-button ui-button-danger" style="width: auto"
								oncomplete="PF('abonarFactura').hide()" icon="fa fa-close"
								actionListener="#{beanFacturas.actionListenerCancel()}"
								update="form-facturas,:form-detalle" />
						</p:panelGrid>
					</p:outputPanel>

				</p:dialog>
			</div>
		</h:form>

	</div>
</body>
</html>
