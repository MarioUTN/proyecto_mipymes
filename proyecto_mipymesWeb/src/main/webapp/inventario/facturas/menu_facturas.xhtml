<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<f:facet name="first">
		<meta name="viewport"
			content="width=device-width, initial-scale=1, shrink-to-fit=no, user-scalable=no" />
		<title>Facturas</title>
	</f:facet>
</h:head>
<body>
	<p:growl>
		<p:autoUpdate />
	</p:growl>
	<h:form id="form-menu">
		<p:menubar style="background-color: #5DADE2;">
			<p:menuitem value="Regresar" icon="fa fa-arrow-circle-left"
				outcome="/login?faces-redirect=true">
				<f:param name="i" value="0" />
			</p:menuitem>
			<p:menuitem value="Inicio"
				outcome="/seguridades/administrador/menu_administrador"
				icon="fa fa-home">
				<f:param name="i" value="1" />
			</p:menuitem>

			<p:submenu label="Ventas" icon="fa fa-calendar-plus-o">
				<p:menuitem value="Ventas Normales" icon="fa fa-shopping-cart"
					outcome="/inventario/ventas/index_ventas">
					<f:param name="i" value="2" />
				</p:menuitem>
				<p:menuitem value="Ventas por Anticipos"
					icon="fa fa-cart-arrow-down"
					outcome="/inventario/ventas_anticipos/index_anticipos">
					<f:param name="i" value="3" />
				</p:menuitem>
			</p:submenu>

			<p:menuitem value="Compras de Productos" icon="fa fa-cart-plus"
				outcome="/inventario/compras/index_compras">
				<f:param name="i" value="4" />
			</p:menuitem>

			<p:menuitem value="Clientes" icon="fa fa-users"
				outcome="/talentohumano/clientes/menu_clientes">
				<f:param name="i" value="5" />
			</p:menuitem>

			<p:menuitem value="Vendedores" icon="fa fa-group"
				disabled="#{beanUsuarios.usuario.tipoUsuario.idTipoUsuario!=1}"
				outcome="/talentohumano/vendedores/menu_vendedores">
				<f:param name="i" value="6" />
			</p:menuitem>

			<p:menuitem value="Facturas" icon="fa fa-file-text"
				disabled="#{beanUsuarios.usuario.tipoUsuario.idTipoUsuario!=1}"
				outcome="/inventario/facturas/menu_facturas">
				<f:param name="i" value="7" />
			</p:menuitem>

			<p:menuitem value="Productos" icon="fa fa-cubes"
				disabled="#{beanUsuarios.usuario.tipoUsuario.idTipoUsuario!=1}"
				outcome="/inventario/productos/menu_productos">
				<f:param name="i" value="8" />
			</p:menuitem>

			<p:menuitem value="Proveedores" icon="fa fa-address-card"
				disabled="#{beanUsuarios.usuario.tipoUsuario.idTipoUsuario!=1}"
				outcome="/inventario/compras/Proveedor">
				<f:param name="i" value="9" />
			</p:menuitem>

			<f:facet name="options">
				<p:menuButton value="#{beanUsuarios.usuario.idUsuario}"
					icon="fa fa-user">
					<p:menuitem value="Perfil" icon="fa fa-cog"></p:menuitem>
					<p:menuitem value="Cerrar sesión" icon="fa fa-sign-out"
						outcome="/login"></p:menuitem>
				</p:menuButton>
			</f:facet>
		</p:menubar>
	</h:form>

	<div align="center">

		<p:panel header="Facturas">
			<h:form id="form-opciones">
				<div align="center">
					<p:panel header="Clasificar Facturas por:">
						<p:panelGrid columns="4" styleClass="ui-noborder">
							<p:commandButton value="Tipo de factura" icon="fa fa-cart-plus"
								update=":form-ver-tipo:tipo-FacturaDialog"
								oncomplete="PF('tipoFacturaDialog').show()"
								styleClass="ui-button-success">
								<p:resetInput target=":form-ver-tipo:tipo-FacturaDialog" />
							</p:commandButton>
							<p:commandButton value="Forma de Pago" icon="fa fa-cart-plus"
								update=":form-ver-forma-pago:formapago-FacturaDialog"
								oncomplete="PF('formapagoFacturaDialog').show()"
								styleClass="ui-button-success">
								<p:resetInput
									target=":form-ver-forma-pago:formapago-FacturaDialog" />
							</p:commandButton>

							<p:commandButton value="Factura por cliente"
								icon="fa fa-cart-plus"
								update=":form-ver-cliente:cliente-FacturaDialog"
								oncomplete="PF('clienteFacturaDialog').show()"
								styleClass="ui-button-success">
								<p:resetInput target=":form-ver-cliente:cliente-FacturaDialog" />
							</p:commandButton>

							<p:commandButton value="Ver todas las Facturas" icon="fa fa-list"
								update="form-facturas"
								actionListener="#{beanFacturas.actionListenerVerFacturas()}"
								styleClass="ui-button-success">
							</p:commandButton>
						</p:panelGrid>
					</p:panel>
				</div>
			</h:form>


			<h:form id="form-ver-tipo">
				<div align="center">
					<p:dialog header="Seleccionar el Tipo de Factura" showEffect="fade"
						modal="true" widgetVar="tipoFacturaDialog" responsive="true">
						<p:outputPanel id="tipo-FacturaDialog" class="ui-fluid">
							<p:panelGrid columns="2">
								<h:outputText value="Tipo de factura:" />
								<p:selectOneMenu value="#{beanFacturas.id_tipo_factura}"
									style="width:350px" panelStyle="width:180px" effect="fade"
									filter="true" filterMatchMode="startsWith">
									<f:selectItems value="#{beanFacturas.listaTipoFacturas}"
										var="tipofactura" itemLabel="#{tipofactura.tfNombre}"
										itemValue="#{tipofactura.idTipoFactura}">
										<p:column style="width:10%" headerText="NOMBRE">
											<span class="flag flag-#{tipofactura.tfNombre}"
												style="width: 30px; height: 20px" />
										</p:column>
										<p:column style="width:10%" headerText="ID">
											<span class="flag flag-#{tipofactura.idTipoFactura}"
												style="width: 30px; height: 20px" />
										</p:column>
										<p:column>
											<f:facet name="header">
												<h:outputText value="Name" />
											</f:facet>
											<h:outputText value="#{tipofactura.tfNombre}" />
										</p:column>

									</f:selectItems>
									<f:facet name="footer">
										<h:outputText
											value="#{beanFacturas.listaTipoFacturas.size()} Tipo de facturas Encontrados"
											style="font-weight:bold;" styleClass="p-py-1 p-d-block" />
									</f:facet>
								</p:selectOneMenu>
							</p:panelGrid>
							<br />
							<div align="center">
								<p:commandButton value="Listar Productos"
									styleClass="ui-button-success" style="width: auto"
									actionListener="#{beanFacturas.actionListenerVerFacturasByTipoFactura()}"
									oncomplete="PF('tipoFacturaDialog').hide()" icon="fa fa-table"
									update="form-facturas" />
							</div>
						</p:outputPanel>

					</p:dialog>
				</div>
			</h:form>



			<h:form id="form-ver-forma-pago">
				<div align="center">
					<p:dialog header="Seleccionar la Forma de Pago de Factura"
						showEffect="fade" modal="true" widgetVar="formapagoFacturaDialog"
						responsive="true">
						<p:outputPanel id="formapago-FacturaDialog" class="ui-fluid">
							<p:panelGrid columns="2">
								<h:outputText value="Forma de Pago:" />
								<p:selectOneMenu value="#{beanFacturas.id_forma_pago}"
									style="width:350px" panelStyle="width:180px" effect="fade"
									filter="true" filterMatchMode="startsWith">
									<f:selectItems value="#{beanFacturas.listaFormaPagos}" var="fp"
										itemLabel="#{fp.fpNombre}" itemValue="#{fp.idFormaPago}">
										<p:column style="width:10%" headerText="NOMBRE">
											<span class="flag flag-#{fp.fpNombre}"
												style="width: 30px; height: 20px" />
										</p:column>
										<p:column style="width:10%" headerText="ID">
											<span class="flag flag-#{fp.idFormaPago}"
												style="width: 30px; height: 20px" />
										</p:column>
										<p:column>
											<f:facet name="header">
												<h:outputText value="Name" />
											</f:facet>
											<h:outputText value="#{fp.fpNombre}" />
										</p:column>

									</f:selectItems>
									<f:facet name="footer">
										<h:outputText
											value="#{beanFacturas.listaFormaPagos.size()} Tipo de facturas Encontrados"
											style="font-weight:bold;" styleClass="p-py-1 p-d-block" />
									</f:facet>
								</p:selectOneMenu>
							</p:panelGrid>
							<br />
							<div align="center">
								<p:commandButton value="Listar Productos"
									styleClass="ui-button-success" style="width: auto"
									actionListener="#{beanFacturas.actionListenerVerFacturasByFormaPago()}"
									oncomplete="PF('formapagoFacturaDialog').hide()"
									icon="fa fa-table" update="form-facturas" />
							</div>
						</p:outputPanel>

					</p:dialog>
				</div>
			</h:form>

			<h:form id="form-ver-cliente">
				<div align="center">
					<p:dialog header="Seleccionar el cliente" showEffect="fade"
						modal="true" widgetVar="clienteFacturaDialog" responsive="true">
						<p:outputPanel id="cliente-FacturaDialog" class="ui-fluid">
							<p:panelGrid columns="2">
								<h:outputText value="Cliente:" />
								<p:selectOneMenu value="#{beanFacturas.cedula_ruc}"
									style="width:350px" panelStyle="width:180px" effect="fade"
									filter="true" filterMatchMode="startsWith">
									<f:selectItems value="#{beanClientes.listaClientes}"
										var="cliente" itemLabel="#{cliente.usuario.usNombres}"
										itemValue="#{cliente.cliRucCedula}">
										<p:column style="width:10%" headerText="NOMBRE">
											<span class="flag flag-#{cliente.usuario.usNombres}"
												style="width: 30px; height: 20px" />
										</p:column>
										<p:column style="width:10%" headerText="ID">
											<span class="flag flag-#{cliente.cliRucCedula}"
												style="width: 30px; height: 20px" />
										</p:column>
										<p:column>
											<f:facet name="header">
												<h:outputText value="Name" />
											</f:facet>
											<h:outputText value="#{cliente.usuario.usNombres}" />
										</p:column>

									</f:selectItems>
									<f:facet name="footer">
										<h:outputText
											value="#{beanClientes.listaClientes.size()} Tipo de facturas Encontrados"
											style="font-weight:bold;" styleClass="p-py-1 p-d-block" />
									</f:facet>
								</p:selectOneMenu>
							</p:panelGrid>
							<br />
							<div align="center">
								<p:commandButton value="Listar Productos"
									styleClass="ui-button-success" style="width: auto"
									actionListener="#{beanFacturas.actionListenerVerFacturasByCliente()}"
									oncomplete="PF('clienteFacturaDialog').hide()"
									icon="fa fa-table" update="form-facturas" />
							</div>
						</p:outputPanel>

					</p:dialog>
				</div>
			</h:form>

			<h:form id="form-facturas">
				<p:panel header="">
					<div align="center">
						<p:dataTable value="#{beanFacturas.listaFacturas}"
							stripedRows="true" var="factura" paginator="true" reflow="true"
							rows="6" style="font-size: 12px" paginatorPosition="bottom"
							rowIndexVar="index">
							<p:column headerText="NUM FACT" style="width:80px">
								<h:outputText value="#{factura.factNumeroFactura}" />
							</p:column>
							<p:column headerText="FECHA EMISIÓN">
								<h:outputText value="#{factura.factFechaEmision}" />
							</p:column>

							<p:column headerText="FORMA PAGO">
								<h:outputText value="#{factura.formaPago.fpNombre}" />
							</p:column>
							<p:column headerText="TIPO DE FACTURA">
								<h:outputText value="#{factura.tipoFactura.tfNombre}" />
							</p:column>

							<p:column headerText="CLIENTE">
								<h:outputText
									value="#{factura.cabeceraFactura.cliente.usuario.usNombres}" />
							</p:column>

							<p:column headerText="SUB TOTAL">
								<h:outputText value="#{factura.factSubtotal}" />
							</p:column>

							<p:column headerText="IVA 12%" style="width:80px">
								<h:outputText value="#{factura.factIva}" />
							</p:column>

							<p:column headerText="TOTAL">
								<h:outputText value="#{factura.factTotal}" />
							</p:column>

							<p:column headerText="Opciones">
								<p:commandButton icon="fa fa-list-alt"
									actionListener="#{beanFacturas.actionListenerSeleccionarFactura(factura.idFactura)}"
									onclick="PF('detalleFactura').show()"
									update=":form-detalle:detalle-Factura"
									oncomplete="PF('detalleFactura').show()"
									styleClass="ui-button-success">
									<p:resetInput target=":form-detalle:detalle-Factura" />
								</p:commandButton>
								<p:commandButton icon="fa fa-dollar"
									actionListener="#{beanFacturas.actionListenerSeleccionarDetalleAbono(factura.idFactura)}"
									onclick="PF('abonarFactura').show()"
									update=":form-abonar:abonar-Factura"
									oncomplete="PF('abonarFactura').show()"
									styleClass="ui-button-help" disabled="#{factura.factEstado}">
									<p:resetInput target=":form-abonar:abonar-Factura" />
								</p:commandButton>
							</p:column>
						</p:dataTable>
					</div>
				</p:panel>
			</h:form>


		</p:panel>

		<h:form id="form-detalle">
			<div align="center">
				<p:dialog header="Vista del detalle de la factura seleccionda"
					showEffect="fade" modal="true" widgetVar="detalleFactura"
					responsive="true">
					<p:outputPanel id="detalle-Factura" class="ui-fluid">

						<p:panel header="">
							<f:facet name="actions">
								<p:commandButton value="Generar Reporte" ajax="false" styleClass="ui-button-help" icon="fa fa-file-pdf-o"
									action="#{beanFacturas.actionListenerGenerarReporte()}">
								</p:commandButton>
							
							</f:facet>

							<p:splitter layout="vertical">
								<p:splitterPanel styleClass="p-d-flex p-ai-center p-jc-center">
									<p:panelGrid columns="6" styleClass="ui-noborder">
										<h:outputLabel value="Fecha Emision:" style="font-weight:bold" />
										<h:outputLabel
											value="#{beanFacturas.facturaSeleccionada.factFechaEmision}" />
										<h:outputLabel value="Vendedor: " style="font-weight:bold" />
										<h:outputLabel
											value="#{beanFacturas.facturaSeleccionada.cabeceraFactura.vendedor.usuario.usNombres}" />
										<h:outputLabel value="Fact. Número: " style="font-weight:bold" />
										<h:outputLabel
											value="#{beanFacturas.facturaSeleccionada.factNumeroFactura}"
											style="font-weight:bold; color: red" />
									</p:panelGrid>
								</p:splitterPanel>
							</p:splitter>
							<div align="center">
								<p:splitter>
									<p:splitterPanel>
										<p:splitter layout="vertical">
											<p:splitterPanel>
												<p:splitter>
													<p:splitterPanel
														styleClass="p-d-flex p-ai-center p-jc-center" size="100">
														<p:panelGrid columns="6" styleClass="ui-noborder">
															<p:outputLabel value="Cedula o RUC: "
																style="font-weight:bold"></p:outputLabel>
															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.cabeceraFactura.cliente.cliRucCedula}" />

															<p:outputLabel value="Nombres: " style="font-weight:bold"></p:outputLabel>
															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.cabeceraFactura.cliente.usuario.usNombres}" />
															<p:outputLabel value="Apellidos: "
																style="font-weight:bold"></p:outputLabel>
															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.cabeceraFactura.cliente.usuario.usApellidos}" />
															<p:outputLabel value="Dirección: "
																style="font-weight:bold"></p:outputLabel>
															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.cabeceraFactura.cliente.cliDireccion}" />
															<p:outputLabel value="Teléfono: "
																style="font-weight:bold"></p:outputLabel>
															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.cabeceraFactura.cliente.cliTelefono}" />
															<p:outputLabel value="Email: " style="font-weight:bold"></p:outputLabel>

															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.cabeceraFactura.cliente.cliEmail}" />
														</p:panelGrid>
													</p:splitterPanel>
													<p:splitterPanel size="30"
														styleClass="p-d-flex p-ai-center p-jc-center">
														<p:panelGrid columns="2" styleClass="ui-noborder">
															<p:outputLabel value="Factura Cancelada: "
																style="font-weight:bold"></p:outputLabel>
															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.factEstado}" />

															<p:outputLabel value="Productos entregados: "
																style="font-weight:bold"></p:outputLabel>
															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.factEntregado}" />

														</p:panelGrid>
													</p:splitterPanel>
												</p:splitter>

											</p:splitterPanel>

										</p:splitter>
									</p:splitterPanel>
								</p:splitter>

							</div>
						</p:panel>

						<p:panel header="">
							<div align="center">
								<p:splitter>
									<p:splitterPanel styleClass="p-d-flex p-ai-center p-jc-center"
										size="100">
										<div align="center">
											<p:dataTable
												value="#{beanFacturas.facturaSeleccionada.detalleFacturas}"
												stripedRows="true" var="detalle" paginator="true"
												reflow="true" rows="4" style="font-size: 12px"
												paginatorPosition="bottom" rowIndexVar="index">
												<p:column headerText="COD" style="width:80px">
													<h:outputText value="#{detalle.producto.prodCodigo}" />
												</p:column>
												<p:column headerText="CANT" style="width:40px">
													<h:outputText value="#{detalle.detCantidad}" />
												</p:column>

												<p:column headerText="NOMBRE">
													<h:outputText value="#{detalle.producto.prodNombre}" />
												</p:column>
												<p:column headerText="DESCR">
													<h:outputText value="#{detalle.producto.prodDescripcion}" />
												</p:column>

												<p:column headerText="PRECIO UNIT">
													<h:outputText value="#{detalle.producto.prodPvpublico}" />
												</p:column>

												<p:column headerText="IVA 12%" style="width:60px">
													<h:outputText value="#{detalle.detIva}" />
												</p:column>

												<p:column headerText="SUB TOTAL">
													<h:outputText value="#{detalle.detSubtotal}" />
												</p:column>
												<p:column headerText="TOTAL">
													<h:outputText value="#{detalle.detPrecioTotal}" />
												</p:column>


											</p:dataTable>
										</div>
									</p:splitterPanel>
									<p:splitterPanel styleClass="p-d-flex p-ai-center p-jc-center"
										size="30">
										<p:panel header="Valor Total de la Factura">
											<p:panelGrid columns="2" styleClass="ui-noborder">
												<p:outputLabel value="Sub Total: " style="font-weight:bold"></p:outputLabel>
												<p:outputLabel
													value="#{beanFacturas.facturaSeleccionada.factSubtotal}"
													style="font-weight:bold"></p:outputLabel>
												<p:outputLabel value="IVA 12 %: " style="font-weight:bold"></p:outputLabel>
												<p:outputLabel
													value="#{beanFacturas.facturaSeleccionada.factIva}"
													style="font-weight:bold"></p:outputLabel>
												<p:outputLabel value="IVA 00 %: " style="font-weight:bold"></p:outputLabel>
												<p:outputLabel value="0.00" style="font-weight:bold"></p:outputLabel>
												<p:outputLabel value="TOTAL: "
													style="font-weight:bold; font-size:22px; color: blue"></p:outputLabel>
												<p:outputLabel
													value="#{beanFacturas.facturaSeleccionada.factTotal}"
													style="font-weight:bold; font-size:22px; color: blue"></p:outputLabel>
											</p:panelGrid>

										</p:panel>
										<p:panel header="">
											<div align="center">
												<p:staticMessage severity="warn"
													summary="#{beanFacturas.estado_EntregadoProductos()}"></p:staticMessage>
											</div>
										</p:panel>

									</p:splitterPanel>
								</p:splitter>

							</div>
						</p:panel>

						<p:panelGrid columns="2" styleClass="ui-noborder">
							<p:commandButton value="Abonar" disabled="true"
								styleClass="rounded-button ui-button-help" style="width: auto"
								oncomplete="PF('detalleFactura').show()" icon="fa fa-money"
								update="form-facturas" />

							<p:commandButton value="Salir"
								styleClass="rounded-button ui-button-danger" style="width: auto"
								oncomplete="PF('detalleFactura').hide()" icon="fa fa-close"
								update="form-facturas" />
						</p:panelGrid>
					</p:outputPanel>

				</p:dialog>
			</div>
		</h:form>

		<h:form id="form-abonar">
			<div align="center">
				<p:dialog header="Abonar Factura" showEffect="fade" modal="true"
					widgetVar="abonarFactura" responsive="true">
					<p:outputPanel id="abonar-Factura" class="ui-fluid">

						<p:panel header="">
							<p:splitter layout="vertical">
								<p:splitterPanel styleClass="p-d-flex p-ai-center p-jc-center">
									<p:panelGrid columns="6" styleClass="ui-noborder">
										<h:outputLabel value="Fecha Emision:" style="font-weight:bold" />
										<h:outputLabel
											value="#{beanFacturas.facturaSeleccionada.factFechaEmision}" />
										<h:outputLabel value="Vendedor: " style="font-weight:bold" />
										<h:outputLabel
											value="#{beanFacturas.facturaSeleccionada.cabeceraFactura.vendedor.usuario.usNombres}" />
										<h:outputLabel value="Fact. Número: " style="font-weight:bold" />
										<h:outputLabel
											value="#{beanFacturas.facturaSeleccionada.factNumeroFactura}"
											style="font-weight:bold; color: red" />
									</p:panelGrid>
								</p:splitterPanel>
							</p:splitter>
							<div align="center">
								<p:splitter>
									<p:splitterPanel>
										<p:splitter layout="vertical">
											<p:splitterPanel>
												<p:splitter>
													<p:splitterPanel
														styleClass="p-d-flex p-ai-center p-jc-center" size="100">
														<p:panelGrid columns="6" styleClass="ui-noborder">
															<p:outputLabel value="Cedula o RUC: "
																style="font-weight:bold"></p:outputLabel>
															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.cabeceraFactura.cliente.cliRucCedula}" />

															<p:outputLabel value="Nombres: " style="font-weight:bold"></p:outputLabel>
															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.cabeceraFactura.cliente.usuario.usNombres}" />
															<p:outputLabel value="Apellidos: "
																style="font-weight:bold"></p:outputLabel>
															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.cabeceraFactura.cliente.usuario.usApellidos}" />
															<p:outputLabel value="Dirección: "
																style="font-weight:bold"></p:outputLabel>
															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.cabeceraFactura.cliente.cliDireccion}" />
															<p:outputLabel value="Teléfono: "
																style="font-weight:bold"></p:outputLabel>
															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.cabeceraFactura.cliente.cliTelefono}" />
															<p:outputLabel value="Email: " style="font-weight:bold"></p:outputLabel>

															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.cabeceraFactura.cliente.cliEmail}" />
														</p:panelGrid>
													</p:splitterPanel>
													<p:splitterPanel size="30"
														styleClass="p-d-flex p-ai-center p-jc-center">
														<p:panelGrid columns="4" styleClass="ui-noborder">

															<p:outputLabel value="Valor: " style="font-weight:bold" />
															<p:spinner id="e" placeholder="15.25" stepFactor="0.01"
																style="width:125px" min="0.00"
																value="#{beanFacturas.valor_abono}" required="true"
																requiredMessage="Ingrese el valor del abono!">
																<p:tooltip for="e" value="Ingrese el valor del abono!"
																	position="bottom" />
															</p:spinner>



														</p:panelGrid>

														<div align="center">

															<p:panelGrid columns="1" styleClass="ui-noborder">
																<p:commandButton value="Abonar Factura"
																	icon="fa fa-save"
																	styleClass="rounded-button ui-button-success"
																	oncomplete="PF('abonarFactura').show()"
																	update="tabla-abono"
																	actionListener="#{beanFacturas.actionListenerAgregarAbonoFactura(beanUsuarios.vendedor.idVendedor)}" />
															</p:panelGrid>

														</div>
													</p:splitterPanel>
													<p:splitterPanel size="30"
														styleClass="p-d-flex p-ai-center p-jc-center">
														<p:panelGrid columns="2" styleClass="ui-noborder">
															<p:outputLabel value="Factura Cancelada: "
																style="font-weight:bold"></p:outputLabel>
															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.factEstado}" />

															<p:outputLabel value="Productos entregados: "
																style="font-weight:bold"></p:outputLabel>
															<p:outputLabel
																value="#{beanFacturas.facturaSeleccionada.factEntregado}" />

														</p:panelGrid>
													</p:splitterPanel>
												</p:splitter>

											</p:splitterPanel>

										</p:splitter>
									</p:splitterPanel>
								</p:splitter>

							</div>
						</p:panel>

						<p:panel header="Detalle de abonos realizados">
							<div align="center">
								<p:splitter>
									<p:splitterPanel styleClass="p-d-flex p-ai-center p-jc-center"
										size="100">
										<div align="center">
											<p:dataTable value="#{beanFacturas.listaDetalleAbonos}"
												id="tabla-abono" stripedRows="true" var="detalleabono"
												paginator="true" reflow="true" rows="4"
												style="font-size: 12px" paginatorPosition="bottom"
												rowIndexVar="index">
												<p:column headerText="CLIENTE" style="width:80px">
													<h:outputText
														value="#{detalleabono.cliente.usuario.usNombres}" />
												</p:column>
												<p:column headerText="VENDEDOR">
													<h:outputText
														value="#{detalleabono.vendedor.usuario.usNombres}" />
												</p:column>

												<p:column headerText="VALOR ABONO">
													<h:outputText value="#{detalleabono.detabAbono}" />
												</p:column>
												<p:column headerText="FECHA ABONO">
													<h:outputText value="#{detalleabono.detabFechaAbono}" />
												</p:column>

												<p:column headerText="SALDO ANTERIOR">
													<h:outputText value="#{detalleabono.detabSaldoAnterior}" />
												</p:column>

												<p:column headerText="SALDO ACTUAL" style="width:60px">
													<h:outputText value="#{detalleabono.detabSaldoActual}" />
												</p:column>

												<p:column headerText="VALOR TOTAL FACTURA">
													<h:outputText
														value="#{detalleabono.estadoPedido.estValorTotal}" />
												</p:column>
											</p:dataTable>
										</div>
									</p:splitterPanel>
									<p:splitterPanel styleClass="p-d-flex p-ai-center p-jc-center"
										size="30">
										<p:panel header="Valor Total de la Factura">
											<p:panelGrid columns="2" styleClass="ui-noborder">
												<p:outputLabel value="Sub Total: " style="font-weight:bold"></p:outputLabel>
												<p:outputLabel
													value="#{beanFacturas.facturaSeleccionada.factSubtotal}"
													style="font-weight:bold"></p:outputLabel>
												<p:outputLabel value="IVA 12 %: " style="font-weight:bold"></p:outputLabel>
												<p:outputLabel
													value="#{beanFacturas.facturaSeleccionada.factIva}"
													style="font-weight:bold"></p:outputLabel>
												<p:outputLabel value="IVA 00 %: " style="font-weight:bold"></p:outputLabel>
												<p:outputLabel value="0.00" style="font-weight:bold"></p:outputLabel>
												<p:outputLabel value="TOTAL: "
													style="font-weight:bold; font-size:22px; color: blue"></p:outputLabel>
												<p:outputLabel
													value="#{beanFacturas.facturaSeleccionada.factTotal}"
													style="font-weight:bold; font-size:22px; color: blue"></p:outputLabel>
											</p:panelGrid>

										</p:panel>
										<p:panel header="">
											<div align="center">
												<p:staticMessage severity="warn"
													summary="#{beanFacturas.estado_EntregadoProductos()}"></p:staticMessage>
											</div>
										</p:panel>

									</p:splitterPanel>
								</p:splitter>

							</div>
						</p:panel>

						<p:panelGrid columns="2" styleClass="ui-noborder">
							<p:commandButton value="Abonar" disabled="false"
								styleClass="rounded-button ui-button-help" style="width: auto"
								oncomplete="PF('abonarFactura').show()" icon="fa fa-money"
								actionListener="#{beanFacturas.actionListenerGuardarAbonosFacturas()}"
								update="form-facturas,:form-detalle" />

							<p:commandButton value="Salir"
								styleClass="rounded-button ui-button-danger" style="width: auto"
								oncomplete="PF('abonarFactura').hide()" icon="fa fa-close"
								update="form-facturas,:form-detalle" />
						</p:panelGrid>
					</p:outputPanel>

				</p:dialog>
			</div>
		</h:form>

	</div>
</body>
</html>
